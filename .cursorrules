# Cursor AI Development Rules - Visa Community Platform

## üö´ STRICTLY PROHIBITED

### **DO NOT CREATE** (Unless explicitly requested by user)

- ‚ùå **Test files** (test\__.py, _\_test.py)
- ‚ùå **README files** - ONLY edit existing README.md
- ‚ùå **Documentation files** (\*.md) - ONLY use PROGRESS.md for tracking
- ‚ùå **Example/demo files** - Use inline examples instead
- ‚ùå **Duplicate functionality** - Check existing files first
- ‚ùå **Architecture/design docs** - Add to PROGRESS.md
- ‚ùå **Quick start guides** - Update README.md
- ‚ùå **Change logs** - Update PROGRESS.md
- ‚ùå **Build summaries** - Add to PROGRESS.md

---

## üìù THREE FILES RULE

**ONLY THREE DOCUMENTATION FILES ALLOWED:**

1. **README.md** - User-facing documentation (how to use)
2. **PROGRESS.md** - Internal progress tracking (what was built)
3. **PROJECT_PROFILE.md** - Complete project overview and technical details

**Never create:**

- ARCHITECTURE.md
- QUICK_START.md
- USER_GUIDE.md
- API_DOCS.md
- CHANGELOG.md
- CONTRIBUTING.md
- DEPLOYMENT.md
- Or ANY other .md file

**Exception:** Only if user explicitly says "create a file called X.md"

---

## ‚úÖ REQUIRED WORKFLOW

### **When Making Changes:**

1. **Edit existing code files** (Python, TypeScript, etc.)
2. **Update PROGRESS.md** with what changed
3. **Update README.md** if user-facing features changed
4. **Update PROJECT_PROFILE.md** with technical details and architecture changes
5. **NEVER** create new .md files

### **When User Asks for Documentation:**

1. **Add to PROGRESS.md** (development history, technical details)
2. **Update README.md** (user instructions, quick start)
3. **Update PROJECT_PROFILE.md** (technical architecture, system details)
4. **Use code comments** (inline documentation)
5. **NEVER** create separate doc files

---

## üîß CODE ORGANIZATION

### **Core Files (Edit these):**

**Backend:**

- `visa_mcp_server.py` - Main FastAPI server
- `community_chat.py` - WebSocket chat
- `chat_synthesizer.py` - AI synthesis
- `simple_vector_processor.py` - Vector search
- `telegram_csv_downloader.py` - Data download
- `data_cleanup.py` - Data preprocessing
- `conversation_analyzer.py` - Topic analysis
- `csv_data_processor.py` - CSV processing

**Frontend:**

- `frontend/src/App.tsx` - Main app
- `frontend/src/CommunityChat.tsx` - Chat UI
- `frontend/src/AIAssistant.tsx` - AI UI
- `frontend/src/types/` - TypeScript types
- `frontend/src/utils/` - Utilities
- `frontend/src/components/` - React components

**Configuration:**

- `pyproject.toml` - Python dependencies (UV)
- `requirements.txt` - Python dependencies (Docker)
- `docker-compose.yml` - Service orchestration
- `Dockerfile` - Backend Docker image
- `Dockerfile.fullstack` - Full-stack Docker image
- `.env` - Environment variables

**Documentation (ONLY these):**

- `README.md` - User documentation
- `PROGRESS.md` - Progress tracking
- `PROJECT_PROFILE.md` - Complete project overview

---

## üéØ DEVELOPMENT PRIORITIES

1. **Functionality first** - Working code over documentation
2. **Consolidation over creation** - Edit, don't create
3. **Three-file documentation** - README.md + PROGRESS.md + PROJECT_PROFILE.md
4. **Inline docs** - Use code comments
5. **No file proliferation** - Minimum files, maximum value

---

## üí° WHEN USER ASKS FOR FEATURES

### **Step 1: Check Existing Files**

- Can this be added to an existing module?
- Is there similar functionality elsewhere?

### **Step 2: Implement**

- Edit existing file(s)
- Add inline comments for complex logic
- Follow existing code style

### **Step 3: Document**

- Update PROGRESS.md with what changed
- Update README.md if user-facing
- Update PROJECT_PROFILE.md with technical details
- NEVER create new documentation files

---

## üì¶ UV DEPENDENCY MANAGEMENT

**ALWAYS use UV** for Python dependencies:

```bash
# Add dependencies
uv add package_name

# Remove dependencies
uv remove package_name

# Sync all
uv sync

# Run with UV environment
uv run python script.py
```

**Update pyproject.toml** - UV manages this automatically  
**Never use pip** - UV is faster and better  
**Docker:** Use `uv pip install --system .` in Dockerfile

---

## üìä PROGRESS TRACKING

**All changes go in PROGRESS.md:**

```markdown
### Latest (Date)

- ‚úÖ Feature added
- ‚úÖ Bug fixed
- ‚úÖ Improvement made
```

**Structure of PROGRESS.md:**

1. Project summary
2. Completed features
3. Architecture
4. Technology stack
5. Development history
6. Issues resolved
7. Future ideas
8. Changes log (most recent at top)

---

## üöÄ EFFICIENCY RULES

- **Batch updates** - Multiple changes in one response
- **Existing patterns** - Follow established code style
- **Minimal files** - Maximum 3 documentation files
- **Core functionality** - Avoid feature creep
- **Keep it working** - Don't break existing features
- **No redundancy** - One source of truth

---

## üéØ SUCCESS METRICS

- **Fewer files** = Better organization
- **More functionality per file** = Better efficiency
- **Single source of truth** = README.md + PROGRESS.md + PROJECT_PROFILE.md only
- **Working code** > Extensive documentation
- **User accomplishes goals** quickly

---

## üìù FILE CREATION CHECKLIST

**Before creating ANY file, ask:**

1. ‚ùì Does this functionality exist elsewhere?
2. ‚ùì Can I add this to an existing file?
3. ‚ùì Is this truly necessary or just nice-to-have?
4. ‚ùì Did the user EXPLICITLY request this file?
5. ‚ùì Is this a code file (Python, TypeScript, etc.) or documentation?

**If documentation:**

- ‚ùå NEVER create new .md files
- ‚úÖ Update PROGRESS.md instead
- ‚úÖ Or update README.md if user-facing
- ‚úÖ Or update PROJECT_PROFILE.md if technical/architectural

**If code file:**

- ‚úÖ Only create if it's a new core module
- ‚úÖ Only if existing files would become >1000 lines
- ‚úÖ Only if it has a clearly different responsibility

---

## üõ°Ô∏è ENFORCEMENT

**If AI Assistant creates unauthorized files:**

- Delete them immediately
- Consolidate content into PROGRESS.md, README.md, or PROJECT_PROFILE.md
- Never create: ARCHITECTURE.md, QUICK_START.md, USER_GUIDE.md, etc.

**Only exception:**

- User explicitly says: "Create a file called X.md"
- Even then, suggest adding to existing docs first

---

## üé® DOCUMENTATION STYLE

### **README.md:**

- User-facing
- Quick start
- Usage examples
- Common commands
- Troubleshooting

### **PROGRESS.md:**

- Development history
- Technical decisions
- Issues resolved
- Future ideas
- Changes log

### **PROJECT_PROFILE.md:**

- Complete project overview
- Technical architecture
- System specifications
- Performance metrics
- Deployment details
- Current status

### **Code Comments:**

- Complex algorithms
- Non-obvious logic
- Function/class docstrings

---

## üîÑ UPDATE WORKFLOW

**After every coding session:**

1. ‚úÖ Update PROGRESS.md "Latest" section
2. ‚úÖ Update README.md if user-facing changes
3. ‚úÖ Update PROJECT_PROFILE.md if technical/architectural changes
4. ‚úÖ Commit changes
5. ‚ùå NEVER create new .md files

---

**Remember:** The goal is to build a maintainable platform, not create extensive documentation. Keep it simple: **3 docs max** (README.md + PROGRESS.md + PROJECT_PROFILE.md).

---

## üìã PROJECT_PROFILE.md UPDATE RULES

**MANDATORY: Update PROJECT_PROFILE.md with every significant change:**

### **When to Update PROJECT_PROFILE.md:**

- ‚úÖ **Architecture changes** - New services, components, or integrations
- ‚úÖ **Technology stack updates** - New frameworks, libraries, or tools
- ‚úÖ **Performance changes** - Speed improvements, resource optimizations
- ‚úÖ **Deployment changes** - New Docker profiles, environment variables
- ‚úÖ **Feature additions** - New functionality or capabilities
- ‚úÖ **Security updates** - Authentication, encryption, or security changes
- ‚úÖ **Data changes** - Database schema, vector collections, or data sources

### **What to Update in PROJECT_PROFILE.md:**

- **Technical Architecture** section
- **Performance Metrics** section
- **Recent Updates** section
- **Project Status** section
- **Deployment Profiles** section
- **API Endpoints** section (if changed)

### **Update Format:**

```markdown
### December 19, 2024

- ‚úÖ **Feature Name**: Brief description of what was added/changed
- ‚úÖ **Technical Details**: Specific technical implementation details
- ‚úÖ **Impact**: How this affects the system or users
```

**This ensures PROJECT_PROFILE.md remains the single source of truth for the complete project state.**
